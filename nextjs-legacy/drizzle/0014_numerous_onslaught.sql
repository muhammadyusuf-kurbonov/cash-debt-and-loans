DROP VIEW `contact_with_balance`;--> statement-breakpoint
CREATE VIEW `contact_with_balance` AS select "contact"."id" as "id", "transactions"."contact" as "contact", "transactions"."currencyId" as "currencyId", "contact"."fullName", "contact"."email", "contact"."phone", "contact"."deleted", "contact"."createdAt", "transactions"."updatedAt", "currency"."name" as "currencyName", "currency"."symbol" as "currencySymbol", sum("transactions"."amount") as "balance" from "transactions" right join "contact" on "contact"."id" = "transactions"."contact" right join "currency" on "currency"."id" = "transactions"."currencyId" where "transactions"."cancelled" <> 1 group by "transactions"."contact", "transactions"."currencyId" order by "transactions"."updatedAt" desc;