DROP VIEW `contact_with_balance`;--> statement-breakpoint
CREATE VIEW `contact_with_balance` AS select "contact"."id", "transactions"."contact", "transactions"."currencyId", "contact"."fullName", "contact"."email", "contact"."phone", "contact"."deleted", "contact"."createdAt", "contact"."updatedAt", "currency"."name", sum("transactions"."amount") as "balance" from "transactions" left join "contact" on "contact"."id" = "transactions"."contact" left join "currency" on "currency"."id" = "transactions"."currencyId" where "transactions"."cancelled" <> 1 group by "transactions"."contact", "transactions"."currencyId" order by "transactions"."updatedAt" desc;